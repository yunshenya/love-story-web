{% extends "base.html" %}

{% block title %}{{ title }} - çˆ±æƒ…è®°å½•{% endblock %}

{% block content %}
<div class="auth-card">
  <!-- Logo and Header -->
  <div class="logo">
    <div class="logo-icon">
      <span style="color: white; font-size: 24px;">â™¥</span>
    </div>
    <h1>çˆ±æƒ…è®°å½•</h1>
    <p>è®°å½•æˆ‘ä»¬çš„ç¾å¥½æ—¶å…‰</p>
  </div>

  <!-- Form Tabs -->
  <div class="form-tabs">
    <button id="loginTab" class="tab-button active" onclick="toggleForm(true)">
      ç™»å½•
    </button>
    <button id="registerTab" class="tab-button" onclick="toggleForm(false)">
      æ³¨å†Œ
    </button>
  </div>

  <!-- Login Form -->
  <form id="loginForm" onsubmit="handleSubmit(event, true)">
    <div class="form-group">
      <label class="form-label" for="emailLogin">é‚®ç®±åœ°å€</label>
      <div class="input-wrapper">
        <span class="input-icon">âœ‰ï¸</span>
        <input
                type="email"
                id="emailLogin"
                name="email"
                class="form-input"
                placeholder="love@example.com"
                required
        >
        <div class="error-message"></div>
      </div>
    </div>

    <div class="form-group">
      <label class="form-label" for="passwordLogin">å¯†ç </label>
      <div class="input-wrapper">
        <span class="input-icon">ğŸ”’</span>
        <input
                type="password"
                id="passwordLogin"
                name="password"
                class="form-input"
                placeholder="è¯·è¾“å…¥å¯†ç "
                required
        >
        <button
                type="button"
                id="toggleLoginPassword"
                class="password-toggle"
                onclick="togglePassword('passwordLogin', 'toggleLoginPassword')"
        >
          ğŸ‘ï¸â€ğŸ—¨ï¸
        </button>
        <div class="error-message"></div>
      </div>
    </div>

    <div class="remember-forgot">
      <label class="checkbox-wrapper">
        <input type="checkbox" name="remember">
        è®°ä½æˆ‘
      </label>
      <a href="#" class="forgot-link">å¿˜è®°å¯†ç ï¼Ÿ</a>
    </div>

    <button type="submit" class="submit-button">
      <span class="button-text">ç™»å½•</span>
      <div class="loading-spinner hidden"></div>
      <span style="font-size: 14px;">â™¥</span>
    </button>
  </form>

  <!-- Register Form -->
  <form id="registerForm" class="hidden" onsubmit="handleSubmit(event, false)">
    <div class="form-group">
      <label class="form-label" for="nameRegister">ç”¨æˆ·å</label>
      <div class="input-wrapper">
        <span class="input-icon">ğŸ‘¤</span>
        <input
                type="text"
                id="nameRegister"
                name="name"
                class="form-input"
                placeholder="è¯·è¾“å…¥ç”¨æˆ·å"
                required
        >
        <div class="error-message"></div>
      </div>
    </div>

    <div class="form-group">
      <label class="form-label" for="emailRegister">é‚®ç®±åœ°å€</label>
      <div class="input-wrapper">
        <span class="input-icon">âœ‰ï¸</span>
        <input
                type="email"
                id="emailRegister"
                name="email"
                class="form-input"
                placeholder="love@example.com"
                required
        >
        <div class="error-message"></div>
      </div>
    </div>

    <div class="form-group">
      <label class="form-label" for="passwordRegister">å¯†ç </label>
      <div class="input-wrapper">
        <span class="input-icon">ğŸ”’</span>
        <input
                type="password"
                id="passwordRegister"
                name="password"
                class="form-input"
                placeholder="è¯·è¾“å…¥å¯†ç "
                required
        >
        <button
                type="button"
                id="toggleRegisterPassword"
                class="password-toggle"
                onclick="togglePassword('passwordRegister', 'toggleRegisterPassword')"
        >
          ğŸ‘ï¸â€ğŸ—¨ï¸
        </button>
        <div class="error-message"></div>
      </div>
    </div>

    <div class="form-group">
      <label class="form-label" for="confirmPasswordRegister">ç¡®è®¤å¯†ç </label>
      <div class="input-wrapper">
        <span class="input-icon">ğŸ”’</span>
        <input
                type="password"
                id="confirmPasswordRegister"
                name="confirmPassword"
                class="form-input"
                placeholder="è¯·å†æ¬¡è¾“å…¥å¯†ç "
                required
        >
        <button
                type="button"
                id="toggleConfirmPassword"
                class="password-toggle"
                onclick="togglePassword('confirmPasswordRegister', 'toggleConfirmPassword')"
        >
          ğŸ‘ï¸â€ğŸ—¨ï¸
        </button>
        <div class="error-message"></div>
      </div>
    </div>

    <button type="submit" class="submit-button">
      <span class="button-text">æ³¨å†Œ</span>
      <div class="loading-spinner hidden"></div>
      <span style="font-size: 14px;">â™¥</span>
    </button>
  </form>

  <!-- Switch Mode -->
  <div class="switch-mode">
    <span id="switchText">è¿˜æ²¡æœ‰è´¦æˆ·ï¼Ÿ</span>
    <a href="#" id="switchLink" class="switch-link" onclick="toggleForm(false); return false;">ç«‹å³æ³¨å†Œ</a>
  </div>

  <!-- Romantic Quote -->
  <div class="romantic-quote">
    "è·ç¦»ä¸æ˜¯é—®é¢˜ï¼Œå¿ƒçš„è·ç¦»æ‰æ˜¯é—®é¢˜"
  </div>

  <!-- Bottom Hearts -->
  <div class="bottom-hearts">
    <span class="heart">â™¥</span>
    <span class="heart">â™¥</span>
    <span class="heart">â™¥</span>
  </div>
</div>

<script>
  // Update switch text based on current form
  function updateSwitchText(isLogin) {
    const switchText = document.getElementById('switchText');
    const switchLink = document.getElementById('switchLink');

    if (isLogin) {
      switchText.textContent = 'è¿˜æ²¡æœ‰è´¦æˆ·ï¼Ÿ';
      switchLink.textContent = 'ç«‹å³æ³¨å†Œ';
      switchLink.onclick = () => { toggleForm(false); return false; };
    } else {
      switchText.textContent = 'å·²æœ‰è´¦æˆ·ï¼Ÿ';
      switchLink.textContent = 'ç«‹å³ç™»å½•';
      switchLink.onclick = () => { toggleForm(true); return false; };
    }
  }

  // Override toggleForm to update switch text
  const originalToggleForm = toggleForm;
  toggleForm = function(isLogin) {
    originalToggleForm(isLogin);
    updateSwitchText(isLogin);
  };
</script>
{% endblock %}